<?xml version="1.0" encoding="utf-8"?>
<templates xml:space="preserve">
    <t t-name="e_website_design.SearchComponent">
        <div class="search-component">
            <label class="form-label" t-if="props.label" t-esc="props.label"/>
            
            <div class="dropdown-search position-relative">
                <input type="text" 
                    class="form-control" 
                    t-att-placeholder="props.placeholder or 'Search...'"
                    t-model="state.searchQuery"
                    t-on-input="onSearchInput"
                    t-ref="searchInput"
                    t-on-focus="() => state.showDropdown = state.searchQuery.length >= 2"/>
                
                <div class="dropdown-menu show w-100 p-0" t-if="state.showDropdown">
                    <div class="text-center py-3" t-if="state.isSearching">
                        <div class="spinner-border spinner-border-sm text-primary" role="status">
                            <span class="visually-hidden">Search...</span>
                        </div>
                        <small class="d-block text-muted mt-1">Search...</small>
                    </div>
                    
                    <t t-elif="!state.isSearching">
                        <div t-if="state.results.length > 0" class="list-group list-group-flush">
                            <t t-foreach="state.results" t-as="record" t-key="record.id">
                                <button type="button" 
                                        class="list-group-item list-group-item-action"
                                        t-on-click="() => this.selectOption(record)">
                                    <t t-esc="record.display_name or record.name"/>
                                </button>
                            </t>
                        </div>
                        
                        <div t-else="" class="text-center py-3 text-muted">
                            <small>Results not found </small>
                        </div>
                    </t>
                </div>
            </div>
        </div>
    </t>
</templates>